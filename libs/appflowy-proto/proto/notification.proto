syntax = "proto3";

package notification;

message WorkspaceNotification {
    oneof payload {
        UserProfileChange profile_change = 1;
        PermissionChanged permission_changed = 2;
        SystemNotification system_notification = 3;
    }
}

message UserProfileChange {
    int64 uid = 1;
    optional string name = 2;
    optional string email = 3;
}

message PermissionChanged {
    string object_id = 1;
    uint32 reason = 2;
}

// 系统通知：用于工作空间级别的通知（成员加入、权限变更、@提及等）
message SystemNotification {
    string id = 1;                     // 通知唯一ID
    string workspace_id = 2;           // 工作空间ID
    string notification_type = 3;      // 通知类型：workspace_member_joined, permission_changed, mention, etc.
    string title = 4;                  // 通知标题
    string message = 5;                // 通知内容
    string payload_json = 6;           // 额外的JSON载荷
    int64 created_at = 7;              // 创建时间戳（秒）
    int64 recipient_uid = 8;           // 接收者用户ID（0表示广播）
}